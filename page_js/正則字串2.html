<!DOCTYPE html>
<html>

<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <script>

        //匹配词的边界(“world”的词首必须独立)
        // \s的例子
        ///\s\w*/.exec('hello world') // [" world"]

        // \b的例子
        ///\bworld/.test('hello world') // true
        ///\bworld/.test('hello-world') // true
        ///\bworld/.test('helloworld') // false

        // \B的例子
        ///\Bworld/.test('hello-world') // false
        ///\Bworld/.test('helloworld') // true


        //正则表达式遇到换行符（\n）就会停止匹配。
        //var html = "<b>Hello</b>\n<i>world!</i>";
        ///.*/.exec(html)[0]// "<b>Hello</b>"
        ///[\S\s]*/.exec(html)[0] // "<b>Hello</b>\n<i>world!</i>"



        //会识别换行符
        ///world$/.test('hello world\n') // false
        ///world$/m.test('hello world\n') // true


        //圆括号（即含有“组匹配”），则返回的数组会包括多个成员。第一个成员是整个匹配成功的结果，后面的成员就是圆括号对应的匹配成功的组。
        //1.
        //var s = '_x_x';
        //var r = /_(x)/;
        //r.exec(s) // ["_x", "x"]

        //2.匹配分组
        ///fred+/.test('fredd') // true
        ///(fred)+/.test('fredfred') // true

        //3.
        //var tagName = /<([^>]+)>[^<]*<\/\1>/;
        //tagName.exec("<b>bold</b>")[1]// 'b'

        //4.
        //var html = '<b class="hello">Hello</b><i>world</i>';
        //var tag = /<(\w+)([^>]*)>(.*?)<\/\1>/g;
        //var match = tag.exec(html);
        //match[1] // "b"
        //match[2] // "class="hello""
        //match[3] // "Hello"


        //\n引用括号匹配的内容，n是从1开始的自然数，表示对应顺序的括号。
        //'abcabc'.match(/(.)b(.)/);//["abc", "a", "c"]
        //'abcabc'.match(/(.)b(.)\1/);//["abca", "a", "c"]
        //'abcabc'.match(/(.)b(.)\1b\2/);//["abcabc", "a", "c"]


        //非捕获组的作用请考虑这样一个场景，假定需要匹配foo或者foofoo，正则表达式就应该写成/(foo){1, 2}/，但是这样会占用一个组匹配。这时，就可以使用非捕获组，将正则表达式改为/(?:foo){1, 2}/，它的作用与前一个正则是一样的，但是不会单独输出括号内部的内容。
        //1.
        //var m = 'abc'.match(/(?:.)b(.)/);
        //m // ["abc", "c"]
        //2
        // 正常匹配
        //var url = /(http|ftp):\/\/([^/\r\n]+)(\/[^\r\n]*)?/;
        //url.exec('http://google.com/');
        //// ["http://google.com/", "http", "google.com", "/"]
        //// 非捕获组匹配
        //var url = /(?:http|ftp):\/\/([^/\r\n]+)(\/[^\r\n]*)?/;
        //url.exec('http://google.com/');
        //// ["http://google.com/", "google.com", "/"]


        //x(?=y)称为先行断言（Positive look-ahead），x只有在y前面才匹配，y不会被计入返回结果。比如，要匹配后面跟着百分号的数字，可以写成/\d+(?=%)/。
        //1.
        //var m = 'abc'.match(/b(?=c)/);
        //m // ["b"]
        //2.
        ///Jack (?=Sprat|Frost)/.test('Jack Frost') // true

        //x(?!y)称为先行否定断言（Negative look-ahead），x只有不在y前面才匹配，y不会被计入返回结果。比如，要匹配后面跟的不是百分号的数字，就要写成/\d+(?!%)/。
        //var m = 'abd'.match(/b(?!c)/);
        //m // ['b']

       
        //g多次匹配
        //index：整个模式匹配成功的开始位置（从0开始计数）。
        //lastIndex：返回下一次开始搜索的位置。该属性可读写，但是只在设置了g修饰符时有意义。
        //var r = /a(b+)a/g;

        //var a1 = r.exec('_abbba_aba_');
        //a1 // ['abbba', 'bbb']
        //a1.index // 1
        //r.lastIndex // 6

        //var a2 = r.exec('_abbba_aba_');
        //a2 // ['aba', 'b']
        //a2.index // 7
        //r.lastIndex // 10

        //var a3 = r.exec('_abbba_aba_');
        //a3 // null
        //a3.index // TypeError: Cannot read property 'index' of null
        //r.lastIndex // 0

        //var a4 = r.exec('_abbba_aba_');
        //a4 // ['abbba', 'bbb']
        //a4.index // 1
        //r.lastIndex // 6
        //连续用了四次exec方法，前三次都是从上一次匹配结束的位置向后匹配。当第三次匹配结束以后，整个字符串已经到达尾部，正则对象的lastIndex属性重置为0，意味着第四次匹配将从头开始。


        //循环完成全部匹配
        //var r = /a(b+)a/g;
        //var s = '_abbba_aba_';
        //while(true) {
        //    var match = r.exec(s);
        //    if (!match) break;
        //    console.log(match[1]);
        //}// bbb// b




        //11.固定電話
        //010-87499685
        //87499685
        //(0\d{2,3}-)?[1-9]\d{7}(-\d{1,5})?
        //()是分組,？可以有也可沒有



        //14.QQ(5-15位,不能以0開頭,全是數字)
        //charCodeAt=字值
        var qq = '212000';
        if (qq.length >= 5 && qq.length <= 15) {
            if (qq.charCodeAt(0) != 48) {
                if (!isNaN(qq)) {
                    console.log('合法')
                } else {
                    console.log('有數字以外')
                }
            } else {
                console.log('0開頭')
            }
        } else {
            console.log('長度錯誤')
        }



        //html try obj  
        var htmldata = `
		<ul>
			<li>
			<h3>吳先生</h3>
			<p>我覺得這個耳機不好用
				<span>2017/11/12</span>
			</p>
			</li>
			<li>
			<h3>林先生</h3>
			<p>耳機還是比較喜歡入耳式
				<span>2017/10/15</span>
			</p>
			</li>
		</ul>
		`

        var datasplit = htmldata.replace(/\n/g, "").match(/<li>(.*?)<\/li>/g)
        var datas = []
        console.log(datasplit)
        for (var i = 0; i < datasplit.length; i++) {
            var name = datasplit[i].match(/<h3>(.*?)<\/h3>/)[1]
            console.log(name)

            var content = datasplit[i].match(/<p>(.*?)<\/p>/)[1]
                // console.log(content)

            var contenttext = content.split("<span>")[0].trim()
                // console.log(contenttext)

            let date = content.match(/<span>(.*?)<\/span>/)[1]
                // console.log(date)

            var commentobj = {
                name: name,
                feedback: contenttext,
                date: date
            }
            datas.push(commentobj)
        }
        console.log(datas)
    </script>
</head>

<body>
    <!--範例１替換文字-->
    <script>
        window.onload = function() {
            var otxt1 = document.getElementById('text1');
            var otxt2 = document.getElementById('text2');
            var obtn = document.getElementById('btn1');
            obtn.onclick = function() {
                var re = /a|和|機|b/g;
                otxt2.value = otxt1.value.replace(re, '***');
            }
        }
    </script>
    <textarea name="aa" id="text1" cols="40" rows="10"></textarea><br>
    <input id="btn1" type="button" value="替換" /><br>
    <textarea name="bb" id="text2" cols="40" rows="10"></textarea><br>


    <!--範例２過濾ＨＴＭＬ-->
    <script>
        window.onload = function() {
            var otxt1 = document.getElementById('text3');
            var otxt2 = document.getElementById('text4');
            var obtn = document.getElementById('btn2');
            obtn.onclick = function() {
                //	    var re=/<.+>/g;//.任意字符
                var re = /<[^<>]+>/g; //除了尖括號任意字符
                otxt2.value = otxt1.value.replace(re, '');
            }
        }
    </script>
    <textarea name="aa" id="text3" cols="40" rows="10"></textarea><br>
    <input id="btn2" type="button" value="過濾" /><br>
    <textarea name="bb" id="text4" cols="40" rows="10"></textarea><br>


    <!--範例３信箱-->
    <script>
        window.onload = function() {
            var otxt1 = document.getElementById('text5');
            var obtn = document.getElementById('btn3');
            obtn.onclick = function() {
                //英文數字下划線＠英文數字.英文
                var re = /^\w+@[a-z0-9]+\.[a-z]+$/i;
                if (re.test(otxt1.value)) {
                    console.log('ok');
                } else {
                    console.log('errol');
                }
            }
        }
    </script>
    <input id="text5" type="text" />
    <input id="btn3" type="button" value="送出" />
</body>

</html>