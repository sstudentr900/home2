<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
</head>

<body>
    <script>
        //不合格的JSON值
        //    { name: "张三", 'age': 32 }  // 属性名必须使用双引号
        //    [32, 64, 128, 0xFFF] // 不能使用十六进制值
        //    { "name": "张三", "age": undefined } // 不能使用undefined
        //    { "name": "张三",
        //	    "birthday": new Date('Fri, 26 Aug 2011 07:13:10 GMT'),
        //	    "getName": function() {
        //	return this.name;
        //    }
        //    } // 不能使用函数和日期对象


        //合格的JSON值
        //    ["one", "two", "three"]
        //    { "one": 1, "two": 2, "three": 3 }
        //    {"names": ["张三", "李四"] }
        //    [ { "name": "张三"}, {"name": "李四"} ]
        
        //https://medium.com/itsems-frontend/javascript-json-stringify-and-json-parse-7a1251d3824c
        // JSON.stringify() ： Javascript 物件轉為 JSON 字串-------------------------------------------------------------
        var obj = {
            name: 'json'
        }
        var json = JSON.stringify(obj) //{"name":"json"}
        console.log(typeof json, json)


        //替換參數
        function replace(key, value) {
            if (typeof value == 'number') {
                return 55
            }
            return value
        }
        var me = {
            name: 'kk',
            age: 15
        }
        console.log(JSON.stringify(me, replace))


        //陣列用法：如果替換函數是一個陣列，會回傳物件中的 name 和陣列的值相等的資料：
        const settings = {
            username: 'lydiahallie',
            level: 19,
            health: 90,
        };

        const data = JSON.stringify(settings, ['level', 'health']);
        console.log(data);

     

        // JSON.parse()： 轉為 Javascript 物件-------------------------------------------------------------
        var jsonData = '{"family":[{"name":"aaa","age":18,"sex":"man"},{"name":"bbb", "age":11, "sex":"woman"}]}';
        var jsonObj = JSON.parse(jsonData);
        console.log(jsonObj.family[0].name); // Bruce
        console.log(jsonObj.family[1].age);
        
        //
        var json = '{"name":"json"}'
        var obj = JSON.parse(json) //{name:'json'}
        console.log(typeof obj, obj)


        //替換參數
        console.log(JSON.parse('{"name": "kk","age": "15"}', function(key, value) {
            if (value == 'kk') {
                return value = 'jj'
            }
            return value
        }))
    </script>
    <h2>JavaScript 自組json</h2>
    <pre class="prettyprint">
      <xmp>
        json = []
        const name = 'king';
        const age = '20';
        json.push(Object.assign({ name, age }))
        console.log(json)
      </xmp>
    </pre>
    <h4>參考</h4>
    <ul>
      <li>
        <a href="https://www.cnblogs.com/heibaiqi/p/16628787.html"> javascript判断字符串是否是数字</a>
      </li>
    </ul>
    <hr>
</body>

</html>